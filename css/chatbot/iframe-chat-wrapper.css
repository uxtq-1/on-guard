/* --------------------------------------------------------------
   Chatbot iframe wrapper – OPS / Marxia
   -------------------------------------------------------------- */

/* —— size variables (single source of truth) —— */
:root {
  --chatbot-width-desktop: 360px;          /* keep current width           */
  --chatbot-height-desktop: 572px;         /* 520 px × 1.10  ≈ 572 px      */
  --chatbot-height-mobile: 80vh;           /* 80 % of viewport on ≤768 px   */
}

/* —— desktop / default wrapper —— */
#chatbot-placeholder {
  display: none;          /* toggled by .active */
  position: fixed;
  bottom: 20px;
  right: calc(20px + 60px + 7px);  /*  = FAB gap                        */

  width: var(--chatbot-width-desktop);
  height: var(--chatbot-height-desktop);

  background: var(--bg-current);
  color: var(--text-current);
  border-radius: 10px;
  box-shadow: 0 5px 25px rgba(0, 0, 0, .20);
  z-index: 2000;
  overflow: hidden;
  flex-direction: column;

  /* entry animation */
  transform: translateY(20px) scale(.95);
  opacity: 0;
  transition: transform .3s ease, opacity .3s ease;
  pointer-events: none;
}

#chatbot-placeholder.active {
  display: flex;
  transform: translateY(0) scale(1);
  opacity: 1;
  pointer-events: auto;
}

/* iframe always fills wrapper */
#chatbot-placeholder iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* —— ≤ 768 px breakpoint – shrink height to 80 vh —— */
@media (max-width: 768px) {
  #chatbot-placeholder {
    width: calc(100% - 30px);     /* nearly full width with margin */
    height: var(--chatbot-height-mobile);
    left: 15px; right: 15px;

    bottom: calc(
      var(--mobile-nav-base-height, 55px)
      + var(--mobile-nav-bottom-offset, 0px)
      + 10px
    );                             /* stay above mobile nav bar     */

    transform: translateY(10px) scale(.98);
  }
  #chatbot-placeholder.active {
    transform: translateY(0) scale(1);
  }
}

/* —— ≤ 480 px – full width, still 80 vh —— */
@media (max-width: 480px) {
  #chatbot-placeholder {
    width: 100%;
    height: var(--chatbot-height-mobile);
    left: 0; right: 0; bottom: 0;
    border-radius: 0;
  }
  #chatbot-placeholder.active { z-index: 10003; }
}
