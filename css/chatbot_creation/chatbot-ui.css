/* css/chatbot_creation/chatbot-ui.css */
/* Styles for the chat log, messages, input, button, and human check */

/* Close Button */
#chatbot-close-button {
  position: absolute;
  top: 5px;
  right: 10px;
  background: none;
  border: none;
  font-size: 24px;
  font-weight: bold;
  color: #777;
  cursor: pointer;
  padding: 5px;
  line-height: 1;
  z-index: 10;
}

#chatbot-close-button:hover {
  color: #333;
}

body[data-theme="dark"] #chatbot-close-button {
  color: #aaa;
}

body[data-theme="dark"] #chatbot-close-button:hover {
  color: #eee;
}


/* Chat Log Area */
.chat-log {
  flex-grow: 10; /* Significantly increased flex-grow for more space */
  padding: 15px; /* Slightly increased padding */
  overflow-y: auto;
  background-color: ghostwhite;
  border-bottom: 1px solid #ccc;
  font-size: 0.95rem;
  scroll-behavior: smooth;
  min-height: 200px; /* Minimum height to ensure it's substantial */
}

body[data-theme="dark"] .chat-log {
  background-color: #333;
  border-bottom-color: #555;
}

/* Message Bubbles */
.message {
  margin-bottom: 10px;
  padding: 8px 12px;
  border-radius: 15px;
  line-height: 1.4;
  max-width: 80%;
  word-wrap: break-word;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.user-message {
  background-color: #007bff;
  color: white;
  margin-left: auto;
  border-bottom-right-radius: 5px;
}

body[data-theme="dark"] .user-message {
  background-color: #0056b3;
}

.bot-message {
  background-color: #e9ecef;
  color: #333;
  margin-right: auto;
  border-bottom-left-radius: 5px;
}

body[data-theme="dark"] .bot-message {
  background-color: #555;
  color: #eee;
}

/* Chat Input Form */
.chat-form {
  display: flex;
  flex-direction: column; /* Ensures items stack vertically */
  padding: 10px;
  background-color: #f8f9fa;
  border-top: 1px solid #ccc;
  gap: 10px; /* Adjusted Spacing between form elements */
}

body[data-theme="dark"] .chat-form {
  background-color: #2a2a2a;
  border-top-color: #555;
}

/* Text Input */
#chat-input {
  width: 100%; /* Full width */
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 20px; /* Rounded corners */
  background-color: ghostwhite;
  color: #333;
  font-size: 0.95rem;
  box-sizing: border-box; /* Include padding and border in the element's total width and height */
  order: 0; /* Default order */
}

body[data-theme="dark"] #chat-input {
  background-color: #444;
  color: #eee;
  border-color: #666;
}

/* Human Verification (checkbox placeholder) */
.recaptcha-placeholder-container {
  display: flex;
  align-items: center;
  padding: 5px 0;
  font-size: 0.9em;
  order: 1; /* Ensures it's after chat-input */
  /* Making the label take up most of the space to push button to right */
  flex-grow: 1;
}

body[data-theme="dark"] .recaptcha-placeholder-container {
  /* Styles for dark theme if any specific needed beyond text color */
}

.recaptcha-label {
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
}

#human-verification-checkbox {
  margin-right: 5px;
  transform: scale(1.1);
}

.recaptcha-text {
  -webkit-user-select: none;
  user-select: none;
  font-weight: 500;
  line-height: 1.4;
}

/* Send Button Container - New element for positioning */
/* We might not need a new container if flex properties on chat-form are managed well.
   For now, let's try to align the button itself within the form.
   If more complex positioning involving the checkbox and button on the same line is needed,
   we'd wrap recaptcha and button in a div with display:flex.
   The diagram implies checkbox and button are on the same "line" below the input.
   Let's adjust .chat-form to be a row for the last items, or wrap them.
*/

/* Adjusting .chat-form to handle the last row items */
/* The main .chat-form is column. We need a wrapper for the last row. */
/* Let's modify HTML first for that, then CSS. For now, simple right align for button. */

/* Send Button */
#chat-send-button {
  align-self: flex-end; /* Aligns button to the right of the form container */
  padding: 8px 12px; /* Made smaller */
  background-color: lemonchiffon;
  color: #333;
  border: none;
  border-radius: 18px; /* Adjusted border-radius */
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s ease;
  font-size: 0.9rem; /* Smaller font */
  order: 2; /* Ensures it's after recaptcha placeholder */
  min-width: 80px;
  margin-left: auto; /* Pushes button to the right if recaptcha doesn't fill space */
}

#chat-send-button:hover {
  background-color: gold;
}

body[data-theme="dark"] #chat-send-button {
  background-color: #FFEC8B;
  color: #222;
}

body[data-theme="dark"] #chat-send-button:hover {
  background-color: #EEDC82;
}

/* Honeypot field (hidden anti-spam trap) */
.ops-chatbot-honeypot-field {
  display: none !important;
}

/* Responsive Fixes */
@media (max-width: 480px) {
  .chat-log {
    min-height: 150px; /* Adjust min-height for mobile */
    padding: 10px;
  }
  .chat-form {
    gap: 12px; /* Adjusted gap for mobile for better spacing */
  }

  #chat-input {
    font-size: 1rem; /* Slightly larger for mobile readability */
  }

  .recaptcha-placeholder-container {
    padding: 8px 0; /* More vertical padding on mobile */
    /* On mobile, checkbox might be above button if they don't fit side-by-side */
    /* align-self: flex-start; /* Reset alignment if needed */
  }

  #chat-input,
  .recaptcha-placeholder-container,
  #chat-send-button {
    width: 100%; /* Full width button on small screens for easier tapping */
    padding: 10px 15px;
    font-size: 0.95rem;
    align-self: stretch; /* Make it full width */
    margin-left: 0; /* Reset margin for full width */
  }
}
